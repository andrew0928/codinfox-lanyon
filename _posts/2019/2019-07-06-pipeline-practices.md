---
layout: post
title: "後端工程師必備: "
categories:
tags: ["系列文章", "架構師", "CLI", "C#", "PIPELINE", "串流處理", "TIPS"]
published: true
comments: true
redirect_from:
logo: 
---

延續前兩篇文章，繼續在來聊聊後端工程師的話題吧! 後端工程師免不了必須解決很多效能及穩定度的問題，因此 "精準" 的掌握你程式碼在做啥事，我覺得是很關鍵的一點。商業邏輯我想你寫得出來大概都沒問題，但是每當我講到平行處理 (例如非同步、多執行續、或是 scale out) 等等議題時，我發現能清楚掌握的人就少了一大半了。如果討論我們多執行緒應該怎麼安排這些任務的處理規則，能精準地寫出來的人又少了一大半...。

我在公司負責架構的團隊，其中一個任務就是替其他團隊搞定這些問題，並且包裝成套件讓其他團隊能輕鬆解決這類問題。為了確保 team member 有足夠的能力做好這件事，我就在內部弄了一個練習用的 side project, 讓大家玩看看。我不大想去考演算法 (想練這個的去寫 leetcode 就好)；也不想單純的考你怎麼解決問題 (這個應該考白板題就好)；我也不想考你會不會特定語言或框架 (這個我也不會 XDD)；我想考的是這些能力是否平衡? 畢竟真正上場的時候，我需要 team member 能夠自己決定最合適的做法啊，這樣成員才有可能成長，我也才能輕鬆一點 (咦?

為了做到這件事，我設計了一個 project, 函式庫內我定義了一個類別 MyTask，他的 instance 必須按照順序呼叫 DoStep1(), DoStep2(), DoStep3() 才算完成。你必須處理完 1000 個 MyTask 物件才算完成任務。處理過程中有些限制或是困難需要克服:

1. 每個 Step 的平行處理數量是有上限的，例如任何 Task 之間的 Step1, 同時間最多只能有 3 個執行。
1. 每個 Step 會花一些時間處理 (不是立即 return)
1. Task 從 Step1 開始，到 Step3 結束的過程中, 會 allocate 大量的 memory (預設: 64mb), 你必須盡可能的降低處理到一半的 Task 數量 (WIP: Work In Progress)

題目會用 IEnumerable<MyTask> 的方式交付 1000 個物件，你的目標是寫一個 Runner 接到 Task, 把它消化完畢就對了。不限定你用任何方式或是框架來處理。不過，我會看這幾個指標來判定你做出來的品質:

1. 主要目標: 是否有確實完成每個 Task? Step 1, 2, 3, Total 1000 Task(s)
1. 品質指標: max(WIP)
1. 品質指標: TTFT(time to first task)
1. 品質指標: Finish Time

準備好接受挑戰了嗎? 現在就去下載題目來試著解看看吧! 這篇文章我會分成前後兩段來發布。前半先發布題目，如果你有意願的話，在一個月內 (時間 FB 我會說明)，在 GitHub 把你的 Runner 發 Pull Request 給我, 我會在後半段發布的內放上 PR 給我的 code, 並且評論一下每種解法的優缺點。

<!--more-->

# 寫在前面: 動機

會寫這文章的動機很單純，就是我一直覺的很多後端工程師必備的基本功，在這個框架滿天飛的年代，都被忽略了。很多問題明明只要基本知識足夠，簡單兩下就能搞定，但是越來越多工程師抱著大部頭的框架來解決。解了問題是好事，但是也讓後續的維護門檻變困難，長期下來得不嘗失啊!

這類問題，平常在做 code review 很難深入到這樣的問題啊 (被我 review 的大概整段 code 都得翻掉了)，在動手寫 code 之前就先做好充分練習才是根本之道，因此我就出了這樣的練習題給 team member 試看看，發現效果還不錯，於是就擴大範圍，也讓其他有興趣的朋友們參與看看。

當然我還有另一個動機: 招募。我也希望能藉這機會找到有心想磨練自己基本功的工程師，這樣的 code 交流我相信比面試聊上一個小時精準的多了。最重要的是透過這樣的方式，你會更清楚知道團隊的要求，你也可以藉這機會試試自己能力；加入團隊後會有更多這樣的挑戰與應用的機會。這不見得是件輕鬆的事情，但是如果你有興趣，這絕對是個難得的機會。


# 品質指標的挑選

要通過這個測驗，其實很簡單，寫個 for loop 就搞定了，但是要比較出好壞，那就要花點心思。我這邊說明一下為何我要挑選這幾個指標來評斷 code 的優劣。這些指標，其實都可以對應到各位日常碰到的實際案例，我就一一來說明。

## 指標: 最大半成品數

## 指標: 第一個任務完成時間

## 指標: 所有任務完成時間

## 小結: 為何這些指標很重要?


# 答題規範


# 範例講評 (待續) ...



















